<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teachable Machine Image Model</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-br from-red-100 via-red-300 to-red-500 text-gray-800">
  
  <!-- เนื้อหา -->
  <main class="flex-grow flex flex-col items-center justify-center">
    <h1 class="flex justify-center  text-5xl font-bold text-gray-800 drop-shadow-lg lg:mb-24 mb-10 hidden lg:block">Global Technology Club KMITL - BUILD YOUR OWN AI</h1>
    <h1 class="flex justify-center  text-3xl font-bold text-gray-800 drop-shadow-lg lg:mb-24 mb-10 block lg:hidden">GTC - BUILD YOUR OWN AI</h1>
    <div class="text-center mb-6">
      <h2 id="op" class="text-2xl font-bold text-white drop-shadow-lg mt-50 lg:text-3xl">Teachable Machine Image Model</h2>
    </div>

    <button type="button" id="buttonST" onclick="init()" class="block mb-6 px-6 py-2 bg-white text-red-600 font-semibold rounded-xl shadow hover:bg-red-50 transition duration-300">
      Start
    </button>

    <h5 id="pts" class="opacity-50 text-white">Press Start To Use Model</h5>

    <div class="flex flex-col items-center">
      <div id="webcam-container" class="mb-4 rounded-xl overflow-hidden shadow-lg border-4 border-white hidden"></div>
      <div id="label-container" class="mt-4 w-64 bg-white rounded-xl p-4 shadow space-y-2 text-center font-semibold text-red-700 hidden"></div>
    </div>
  </main>

  <!-- ฟุตเตอร์ -->
  <div class="footer bg-red-700 text-white py-4  text-center text-sm opacity-100 lg:opacity-50 lg:hover:opacity-100 transition duration-300 items-center flex justify-between lg:justify-center ">

    <div class="flex mt-1">
       <p class="flex mt-1.5 ">
        <img class="w-8 mr-1 lg:ml-5 items-center " src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/500px-Instagram_icon.png" alt="">
        <p class="mt-1.5 text-lg hover:text-red-200 mr-1.5 items-center">:</p>
        <a class="mt-3 underline hover:text-red-200 items-center mr-1.5" href="https://www.instagram.com/campp_er/" target="_blank">campp_er</a>
      </p>
    </div>

    <p class="text-sm mt-3 mr-3 ml-3 hidden lg:block items-center">Made with ❤️ by 
      <p class=" mt-3 underline hover:text-red-200 mr-1.5 hidden lg:block items-center"> THANADON TOKHEAW</p>
    </p>

    <div class="flex mt-6">
       <p class="flex mt-1.5  ">
         <img class="w-8 mr-1 lg:ml-5 mb-5 items-center" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/2021_Facebook_icon.svg/2048px-2021_Facebook_icon.svg.png" alt="">
         <p class="mt-1.5 text-lg hover:text-red-200 mr-1.5 items-center">:</p>
         <a class="mt-3 underline hover:text-red-200 items-center lg:pr-50" href="https://www.facebook.com/thna.dl.to.kheiyw" target="_blank">ธนาดล โตเขียว</a>
       </p>
    </div>
  </div>

  <!-- Script -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

  <script type="text/javascript">
    const URL = "https://teachablemachine.withgoogle.com/models/KUz5Wn9tF/";
    let model, webcam, labelContainer, maxPredictions;

    async function init() {
      const modelURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";
      const webcamCon = document.getElementById("webcam-container");
      const labelCon = document.getElementById("label-container");
      const buttonST = document.getElementById("buttonST");
      const P = document.getElementById("pts");
      const ps = document.getElementById("op");

      model = await tmImage.load(modelURL, metadataURL);
      maxPredictions = model.getTotalClasses();

      const flip = true;
      webcam = new tmImage.Webcam(350, 350, flip);
      await webcam.setup();
      await webcam.play();
      window.requestAnimationFrame(loop);

      webcamCon.appendChild(webcam.canvas);
      labelContainer = labelCon;
      for (let i = 0; i < maxPredictions; i++) {
        labelContainer.appendChild(document.createElement("div"));
      }

      webcamCon.classList.remove("hidden");
      webcamCon.classList.add("block");

      buttonST.classList.remove("block");
      buttonST.classList.add("hidden");

      labelCon.classList.remove("hidden");
      labelCon.classList.add("block");

      P.classList.add("hidden");

      ps.classList.add("hidden");
    }

    async function loop() {
      webcam.update();
      await predict();
      window.requestAnimationFrame(loop);
    }

    async function predict() {
      const prediction = await model.predict(webcam.canvas);
      for (let i = 0; i < maxPredictions; i++) {
        const classPrediction =
          prediction[i].className + ": " + prediction[i].probability.toFixed(2);
        labelContainer.childNodes[i].innerHTML = classPrediction;
      }
    }
  </script>

</body>

</html>
